Building configuration...

Current configuration : 8234 bytes
!
! Last configuration change at 02:50:18 UTC Fri Aug 1 2025
!
version 17.12
service timestamps debug datetime msec
service timestamps log datetime msec
!
hostname R13
!
boot-start-marker
boot-end-marker
!
!
aaa new-model
!
!
aaa authentication enable default none
aaa authorization exec default local none 
!
aaa session-id common
!
!
!
!
!
!
!
!
!
!
!
!
!
ip domain name home.local
ip cef
login on-success log
no ipv6 cef
!
!
!
!
!
!
!
!
multilink bundle-name authenticated
!
!
key chain BGP_CHAIN tcp
 key 1
key chain OSPF_CHAIN
 key 1
  key-string password
  accept-lifetime 00:00:00 Jan 1 2025 infinite
  send-lifetime 00:00:00 Jan 1 2025 infinite
  cryptographic-algorithm hmac-sha-512
!
crypto pki trustpoint TP-self-signed-67109072
 enrollment selfsigned
 subject-name cn=IOS-Self-Signed-Certificate-67109072
 revocation-check none
 rsakeypair TP-self-signed-67109072
 hash sha256
!
!
crypto pki certificate chain TP-self-signed-67109072
 certificate self-signed 01
  3082032C 30820214 A0030201 02020101 300D0609 2A864886 F70D0101 0B050030 
  2F312D30 2B060355 04030C24 494F532D 53656C66 2D536967 6E65642D 43657274 
  69666963 6174652D 36373130 39303732 301E170D 32353037 32333030 32383436 
  5A170D33 35303732 33303032 3834365A 302F312D 302B0603 5504030C 24494F53 
  2D53656C 662D5369 676E6564 2D436572 74696669 63617465 2D363731 30393037 
  32308201 22300D06 092A8648 86F70D01 01010500 0382010F 00308201 0A028201 
  0100A822 45979AF4 0B007CA7 3F9D2B65 3CA29371 BC6213D9 E7AB43F7 42803C5E 
  59E86527 C82877AC 0A0C8703 2C2829B0 8B6E1858 924DD64A F2A569EC FB4E4F38 
  E6093B21 D3BAEE02 8801B502 555102FA 87A9EF27 62FC3A86 045C84A4 7D462ECB 
  C8E57F8B 62F6091B 52858183 F81891D0 7D89D9C1 2B0DFDF1 1AAB91D1 931292EC 
  0C2928AF 633A3C09 45461638 E4ADC33F 88C90000 32D989FE 2F11158C 60A82EE0 
  D4627DE9 E16A60C4 EBCD6399 80CC4664 AAE46E31 3A17ABA2 C26362C8 418844D5 
  40A5A2AB 0120E2BC C7A85984 4686FB8C CF09F4D7 6E4A9FF9 A94E432C 05A1E3A3 
  AB5F689A 142285E8 5193215B 92033606 77D4E93B 641D02C2 E19A9064 0D64568D 
  963B0203 010001A3 53305130 1D060355 1D0E0416 04144572 6B8EC5E1 A17F9533 
  D9CD7F82 90D147C8 712D301F 0603551D 23041830 16801445 726B8EC5 E1A17F95 
  33D9CD7F 8290D147 C8712D30 0F060355 1D130101 FF040530 030101FF 300D0609 
  2A864886 F70D0101 0B050003 82010100 A2CB3AFA BE1B3B03 1CCD7183 AF92081A 
  08B2F481 9EAC2B74 F591D197 67DE113E 65690F5D 47258719 8B356F47 F6E8C4D6 
  9E4E2D27 2A872CFB 0BF7711A C553A534 11776AD6 A6B66995 DEC8D7D5 6C18DD8D 
  C700DB93 A771815B 31F2DE07 9944836E BA3E1751 C9CB3A0F 0F0A8108 0EA5B273 
  FFB0E98F 58EB552D E2B3B6A0 A752B078 70B4D6E3 0679ED6B ADF66696 958A4808 
  14041349 31475177 34473531 C52334BF E7C14C54 47C83C7A D66658F7 FA5137FC 
  27E63A01 F06723C6 6B560D9B 813E020D 9FCF8A08 3892B2C3 3EC5D4F8 C43ADA57 
  6CA49B06 A564B52C FA1E465D E329255F 1B39C606 AEE615EE 46900968 1FFB2238 
  F3AC09C0 CCF93C73 5FE1B5B4 5B96EE76
  	quit
!
!
memory free low-watermark processor 81225
!
!
spanning-tree mode rapid-pvst
!
!
username admin privilege 15 secret 9 $9$6MiGQWDeIezI6U$JQzMCHwBVIcOYrN0RwKycEELfVR/ukehWm6pcGnOaOE
username tempadmin privilege 15 secret 9 $9$hFBB2JidrJfVGU$F7I7nsHdbp9P2r4i0HxxCRLiOR0gmI/t1Hm1Vr0ARPI
bfd-template single-hop BFD-TEMPLATE
 interval min-tx 200 min-rx 200 multiplier 4
!
!
crypto ikev2 proposal IKEV2-PROPOSAL 
 encryption aes-cbc-256
 integrity sha384
 group 20
crypto ikev2 proposal LAB-VPN 
 encryption aes-gcm-128
 prf sha512
 group 20
crypto ikev2 proposal LAB-VPN_proposal 
 encryption aes-gcm-128
 prf sha512
 group 20
crypto ikev2 proposal vpn_r13_proposal 
 encryption aes-gcm-128
 prf sha512
 group 20
!
crypto ikev2 policy LAB-VPN 
 proposal LAB-VPN
crypto ikev2 policy LAB-VPN_policy 
 proposal LAB-VPN_proposal
crypto ikev2 policy vpn_r13_policy 
 proposal vpn_r13_proposal
!
crypto ikev2 keyring IKEV2-KEYRING
 peer ROUTER2
  address 1.1.1.2
  pre-shared-key local password
  pre-shared-key remote password
 !
!
crypto ikev2 keyring vpn_r13_keyring
 peer 3.3.3.3
  address 3.3.3.3
  pre-shared-key super_secret_key
 !
!
crypto ikev2 keyring vpn_r3_keyring
 peer 1.1.1.1
  address 1.1.1.1
  pre-shared-key super_secret_key
 !
!
crypto ikev2 keyring LAB-VPN_keyring
 peer 3.3.3.3
  address 3.3.3.3
  pre-shared-key super_secret_key
 !
 peer 1.1.1.1
  address 1.1.1.1
  pre-shared-key super_secret_key
 !
 peer 6.6.6.6
  address 6.6.6.6
  pre-shared-key super_secret_key
 !
!
crypto ikev2 keyring LAB-VPN
 peer 2.2.2.2
  address 2.2.2.2
  pre-shared-key super_secret_key
 !
!
!
crypto ikev2 profile IKEV2-PROFILE
 match identity remote address 1.1.1.2 255.255.255.255 
 authentication remote pre-share
 authentication local pre-share
 keyring local IKEV2-KEYRING
 lifetime 14400
!
crypto ikev2 profile vpn_r13_profile
 match identity remote address 3.3.3.3 255.255.255.255 
 authentication remote pre-share
 authentication local pre-share
 keyring local vpn_r13_keyring
!
crypto ikev2 profile vpn_r3_profile
 match identity remote address 1.1.1.1 255.255.255.255 
 authentication remote pre-share
 authentication local pre-share
 keyring local vpn_r3_keyring
!
crypto ikev2 profile LAB-VPN_profile
 match identity remote address 6.6.6.6 255.255.255.255 
 authentication remote pre-share
 authentication local pre-share
 keyring local LAB-VPN_keyring
!
crypto ikev2 profile LAB-VPN
 match identity remote address 2.2.2.2 255.255.255.255 
 authentication remote pre-share
 authentication local pre-share
 keyring local LAB-VPN
!
!
!
!
policy-map QOS
 class class-default
!
! 
!
!
!
!
!
!
!
!
crypto ipsec transform-set AES256-SHA256 esp-aes 256 esp-sha256-hmac 
 mode tunnel
crypto ipsec transform-set vpn_r13_transform esp-aes 
 mode tunnel
crypto ipsec transform-set vpn_r3_transform esp-aes 
 mode tunnel
crypto ipsec transform-set LAB-VPN_transform esp-aes 256 
 mode tunnel
crypto ipsec transform-set LAB-VPN esp-aes 256 
 mode tunnel
!
crypto ipsec profile IPSEC-PROFILE
 set transform-set AES256-SHA256 
 set pfs group14
 set ikev2-profile IKEV2-PROFILE
!
crypto ipsec profile LAB-VPN
 set transform-set LAB-VPN 
 set ikev2-profile LAB-VPN
!
crypto ipsec profile LAB-VPN_profile
 set transform-set LAB-VPN_transform 
!
!
crypto ipsec profile vpn_r13_profile
 set transform-set vpn_r13_transform 
!
crypto ipsec profile vpn_r3_profile
 set transform-set vpn_r3_transform 
!
!
!
!
!
!
!
interface Loopback0
 ip address 1.1.1.1 255.255.255.255
!
interface Tunnel0
 description IPsec VPN Tunnel
 ip address 192.168.2.1 255.255.255.0
 tunnel source Loopback0
 tunnel mode ipsec ipv4
 tunnel destination 2.2.2.2
 tunnel protection ipsec profile LAB-VPN
!
interface Ethernet0/0
 description test
 ip address 192.0.2.21 255.255.255.252
 ip ospf cost 10
 bfd interval 200 min_rx 200 multiplier 4
 service-policy input QOS
!
interface Ethernet0/1
 ip address 192.168.1.254 255.255.255.0
!
interface Ethernet0/2
 ip address 192.0.2.2 255.255.255.252
!
interface Ethernet0/3
 description TO-R6
 ip address 192.0.2.14 255.255.255.252
 ip ospf authentication key-chain OSPF_CHAIN
 bfd interval 200 min_rx 200 multiplier 4
 service-policy input QOS
!
!
router eigrp 100
!
router ospf 100
 passive-interface default
 no passive-interface Ethernet0/2
 no passive-interface Ethernet0/3
 network 0.0.0.0 255.255.255.255 area 0
!
router bgp 65510
 bgp cluster-id 1.1.1.1
 bgp log-neighbor-changes
 neighbor 3.3.3.3 remote-as 65510
 neighbor 3.3.3.3 update-source Loopback0
 neighbor 5.5.5.5 remote-as 65510
 neighbor 5.5.5.5 update-source Loopback0
 neighbor 6.6.6.6 remote-as 65510
 neighbor 6.6.6.6 update-source Loopback0
 neighbor 192.0.2.22 remote-as 65520
 neighbor 192.168.1.111 remote-as 65510
 !
 address-family ipv4
  redistribute ospf 100
  neighbor 3.3.3.3 activate
  neighbor 3.3.3.3 next-hop-self
  neighbor 5.5.5.5 activate
  neighbor 5.5.5.5 route-reflector-client
  neighbor 5.5.5.5 next-hop-self
  neighbor 6.6.6.6 activate
  neighbor 6.6.6.6 route-reflector-client
  neighbor 6.6.6.6 next-hop-self
  neighbor 192.0.2.22 activate
  neighbor 192.168.1.111 activate
 exit-address-family
!
ip forward-protocol nd
!
!
ip http server
ip http secure-server
ip ssh bulk-mode 131072
!
!
route-map QOS permit 10 
!
!
!
!
!
!
control-plane
!
!
!
line con 0
 logging synchronous
line aux 0
line vty 0 4
 transport input ssh
!
!
!
!
end